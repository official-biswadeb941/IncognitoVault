<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile Manager</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
  /* Custom styles */
  body {
    background-color: #f8f9fa;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  }
  .container {
    display: flex;
    height: 100vh;
  }
  .left-pane, .right-pane {
    padding: 20px;
    overflow-y: auto;
  }
  .left-pane {
    width: 40%;
    background-color: #ffffff;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  .right-pane {
    width: 60%;
    padding-left: 40px;
  }
  h1 {
    font-size: 24px;
    margin-bottom: 20px;
    color: #343a40;
  }
  .form-group {
    margin-bottom: 15px;
  }
  .form-control {
    border-radius: 0;
  }
  .btn {
    border-radius: 0;
  }
  .btn-success {
    background-color: #28a745;
    border-color: #28a745;
  }
  .btn-primary {
    background-color: #007bff;
    border-color: #007bff;
  }
  .btn-danger {
    background-color: #dc3545;
    border-color: #dc3545;
  }
</style>
</head>
<body>
<div class="container">
  <div class="left-pane">
    <h1>Create Your Custom Form</h1>
    <form id="dynamicForm">
      <div class="form-group">
        <input type="text" class="form-control" id="formName" placeholder="Enter form name">
      </div>
      <div id="fieldsContainer">
        <!-- Initial input field for adding new fields -->
        <div class="form-group row">
          <div class="col-10">
            <input type="text" class="form-control" id="fieldName" placeholder="Enter field name">
          </div>
          <div class="col-2">
            <button type="button" class="btn btn-success btn-sm mb-2" id="addFieldBtn">+</button>
          </div>
        </div>
      </div>
      <button type="button" class="btn btn-primary mt-3" id="createFormBtn" disabled>Create Form</button>
    </form>
  </div>
  <div class="right-pane">
    <div id="formOutput">
      <!-- Generated form elements will be added here -->
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  // JavaScript for dynamic form creation
  var fieldNames = []; // Array to store field names

  document.getElementById('addFieldBtn').addEventListener('click', function() {
    var fieldNameInput = document.getElementById('fieldName');
    var fieldName = fieldNameInput.value.trim();

    if (fieldName !== '' && !fieldNames.includes(fieldName)) {
      fieldNames.push(fieldName); // Add field name to array

      var fieldGroup = document.createElement('div');
      fieldGroup.className = 'form-group row';

      var colInput = document.createElement('div');
      colInput.className = 'col-10';

      var input = document.createElement('input');
      input.type = 'text';
      input.className = 'form-control';
      input.setAttribute('placeholder', fieldName);

      colInput.appendChild(input);

      var colBtn = document.createElement('div');
      colBtn.className = 'col-2';

      var removeBtn = document.createElement('button');
      removeBtn.type = 'button';
      removeBtn.className = 'btn btn-danger btn-sm mb-2';
      removeBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
      removeBtn.addEventListener('click', function() {
        fieldNames = fieldNames.filter(function(item) {
          return item !== fieldName;
        });
        fieldGroup.remove();
        updateCreateFormButtonState(); // Update button state after removing field
      });

      colBtn.appendChild(removeBtn);
      fieldGroup.appendChild(colInput);
      fieldGroup.appendChild(colBtn);

      document.getElementById('fieldsContainer').appendChild(fieldGroup);

      fieldNameInput.value = ''; // Clear input field after adding
      updateCreateFormButtonState(); // Update button state after adding field
    } else {
      alert('Please enter a unique field name.');
    }
  });

  function updateCreateFormButtonState() {
    var createFormBtn = document.getElementById('createFormBtn');
    var formNameInput = document.getElementById('formName').value.trim();
    if (fieldNames.length >= 3 && formNameInput !== '') {
      createFormBtn.removeAttribute('disabled');
    } else {
      createFormBtn.setAttribute('disabled', 'disabled');
    }
  }

  document.getElementById('createFormBtn').addEventListener('click', function() {
    var formOutput = document.getElementById('formOutput');
    formOutput.innerHTML = ''; // Clear previous form content

    var formName = document.getElementById('formName').value.trim();
    var formTitle = document.createElement('h2');
    formTitle.textContent = formName;
    formOutput.appendChild(formTitle);

    var form = document.createElement('form');
    form.id = 'generatedForm';

    var formGroups = document.querySelectorAll('#fieldsContainer .form-group:not(:first-child)');
    formGroups.forEach(function(fieldGroup, index) {
      var fieldName = fieldGroup.querySelector('input').getAttribute('placeholder');

      var formGroup = document.createElement('div');
      formGroup.className = 'form-group row';

      var labelDiv = document.createElement('div');
      labelDiv.className = 'col-sm-3 col-form-label';
      labelDiv.textContent = fieldName;

      var inputDiv = document.createElement('div');
      inputDiv.className = 'col-sm-9';

      var input = document.createElement('input');
      input.type = 'text';
      input.className = 'form-control';
      input.name = 'field_' + index; // Assign unique name attribute

      inputDiv.appendChild(input);

      formGroup.appendChild(labelDiv);
      formGroup.appendChild(inputDiv);

      form.appendChild(formGroup);
    });

    var submitBtn = document.createElement('button');
    submitBtn.type = 'submit';
    submitBtn.className = 'btn btn-primary';
    submitBtn.textContent = 'Submit';

    var submitDiv = document.createElement('div');
    submitDiv.className = 'form-group row';
    var submitCol = document.createElement('div');
    submitCol.className = 'col-sm-9 offset-sm-3';
    submitCol.appendChild(submitBtn);
    submitDiv.appendChild(submitCol);

    form.appendChild(submitDiv);
    formOutput.appendChild(form);

    // Reset the custom form creation tool
    resetFormCreationTool();

    // Optional: Submit form handling
    form.addEventListener('submit', function(event) {
      event.preventDefault();
      // Handle form submission logic here
      // You can collect form data using form.serialize() or other methods
    });
  });

  function resetFormCreationTool() {
    document.getElementById('formName').value = '';
    document.getElementById('fieldName').value = '';
    fieldNames = [];
    var fieldsContainer = document.getElementById('fieldsContainer');
    fieldsContainer.innerHTML = `
      <div class="form-group row">
        <div class="col-10">
          <input type="text" class="form-control" id="fieldName" placeholder="Enter field name">
        </div>
        <div class="col-2">
          <button type="button" class="btn btn-success btn-sm mb-2" id="addFieldBtn">+</button>
        </div>
      </div>
    `;
    updateCreateFormButtonState();
    document.getElementById('addFieldBtn').addEventListener('click', function() {
      var fieldNameInput = document.getElementById('fieldName');
      var fieldName = fieldNameInput.value.trim();

      if (fieldName !== '' && !fieldNames.includes(fieldName)) {
        fieldNames.push(fieldName); // Add field name to array

        var fieldGroup = document.createElement('div');
        fieldGroup.className = 'form-group row';

        var colInput = document.createElement('div');
        colInput.className = 'col-10';

        var input = document.createElement('input');
        input.type = 'text';
        input.className = 'form-control';
        input.setAttribute('placeholder', fieldName);

        colInput.appendChild(input);

        var colBtn = document.createElement('div');
        colBtn.className = 'col-2';

        var removeBtn = document.createElement('button');
        removeBtn.type = 'button';
        removeBtn.className = 'btn btn-danger btn-sm mb-2';
        removeBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
        removeBtn.addEventListener('click', function() {
          fieldNames = fieldNames.filter(function(item) {
            return item !== fieldName;
          });
          fieldGroup.remove();
          updateCreateFormButtonState(); // Update button state after removing field
        });

        colBtn.appendChild(removeBtn);
        fieldGroup.appendChild(colInput);
        fieldGroup.appendChild(colBtn);

        document.getElementById('fieldsContainer').appendChild(fieldGroup);

        fieldNameInput.value = ''; // Clear input field after adding
        updateCreateFormButtonState(); // Update button state after adding field
      } else {
        alert('Please enter a unique field name.');
      }
    });
    document.getElementById('formName').addEventListener('input', updateCreateFormButtonState);
    document.getElementById('fieldName').addEventListener('input', updateCreateFormButtonState);
  }

  document.getElementById('formName').addEventListener('input', updateCreateFormButtonState);
  document.getElementById('fieldName').addEventListener('input', updateCreateFormButtonState);
</script>
</body>
</html>
